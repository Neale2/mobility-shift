<!doctype html>
<html lang="en">
    <head>
        {% block title %}
        <title>Sign Up</title>
        {% endblock %}
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!--searchable dropdowns-->
        <script src="https://cdn.jsdelivr.net/npm/choices.js@9.0.1/public/assets/scripts/choices.min.js"></script>

        <!-- Add additional CSS in static file -->
        {% load static %}
        <link rel="stylesheet" href="{% static 'css/dropdown.css' %}" />
        <link rel="stylesheet" href="{% static 'css/styles.css' %}" />
    </head>
    <body>
        <header>
            <h1>Swap One Signup</h1>
        </header>
        <main>
            <div class="blurb">
                <h3>Welcome to Swap One!</h3>
                <h3>About the programme:</h3>
            </div>
            <div class="content">
                <p>
                    Swap One is a programme designed to incentivise users to reduce their high carbon commutes ( car
                    trips). We are working with Nelson organisaions to reduce the carbon impact. Any data you share with
                    us will be used only for app operation or for climate related research.
                </p>
                <h3>Register:</h3>
            </div>
            <form method="post">
                {% csrf_token %} {{ form }}
                <input type="submit" value="Register" class="submit button input" />
            </form>
        </main>

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const form = document.querySelector("form");
                const submitButton = form.querySelector('[type="submit"]');

                form.addEventListener("submit", function () {
                    submitButton.disabled = true;
                    submitButton.value = "Processing...";
                });

                const infocontent = {
                    name: "Input your first name, or whatever you want us to call you!",
                    vehicle:
                        "If you already don't commute using a high-carbon method, then you're amazing, but this program probably isn't for you. Check out alternatives like Love To Ride!"
                };

                for (elem of document.getElementsByClassName("info")) {
                    var infobox = document.createElement("div");
                    var parent = elem.parentElement;
                    parent.insertBefore(infobox, elem);
                    infobox.outerHTML = "<div class='infobox'>" + infocontent[elem.id] + "</div>";
                }
            });
        </script>
    </body>
</html>
